<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Local Time Clock</title>
  <style>
    /* Base styles */
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #000;
      font-family: Arial, sans-serif;
      touch-action: none;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    /* Background video container */
    #background-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: -1;
      filter: blur(5px);
      transition: filter 0.3s ease;
    }

    /* When container has .unblur-background, remove blur */
    .container.unblur-background #background-video {
      filter: blur(0);
    }

    /* Adjust the video wrapper to scale the video to touch the top and bottom edges */
    #background-video .video-wrapper {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100vh; /* Use viewport height to maintain square aspect ratio */
      height: 100vh; /* Force the height to match the viewport height */
      min-width: 100vw; /* Ensure it covers the width */
      min-height: 100vh; /* Ensure it covers the height */
    }

    /* Ensure the iframe inside the video wrapper stretches to fill the wrapper */
    #background-video .video-wrapper iframe {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    /* Clock video (the one within the clock face) */
    .clock-video {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: auto;
      transform: translate(-50%, -50%);
      z-index: 1;
    }

    /* Generic video wrapper (for the clock video) */
    .video-wrapper {
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: 100%;
      will-change: transform;
    }

    .video-wrapper iframe {
      position: absolute;
      width: 100%;
      height: 100%;
      left: 0;
      top: 0;
      border: 0;
      display: block;
    }

    /* Clock face styles */
    .clock {
      position: relative;
      width: 90vmin;
      height: 90vmin;
      border: 10px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      overflow: hidden;
      z-index: 2;
      will-change: transform, width, height;
    }

    /* When .no-background is set, hide the inner clock video */
    .clock.no-background .clock-video {
      display: none;
    }

    .hand {
      position: absolute;
      width: 50%;
      height: 0.2vmin;
      background-color: rgba(255, 255, 255, 0.4);
      top: 50%;
      left: 50%;
      transform-origin: 0% 50%;
      transition: transform 0.05s ease-in-out;
      z-index: 3;
      will-change: transform;
    }

    .hour-hand {
      height: 0.4vmin;
      width: 35%;
      background-color: rgba(255, 255, 255, 0.8);
    }

    .minute-hand {
      height: 0.3vmin;
      width: 45%;
      background-color: rgba(255, 255, 255, 0.6);
    }

    .second-hand {
      height: 0.15vmin;
      width: 50%;
      background-color: rgba(255, 0, 0, 0.8);
    }

    .digital-clock {
      position: absolute;
      top: 3vmin;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 2vmin;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 10px;
      border-radius: 5px;
      z-index: 4;
    }

    /* Controls container */
    .controls {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      z-index: 5;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    /* Menu button styles - updated from the first code */
    .menu-button {
      background-color: transparent;
      color: white;
      border: 1px solid white;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 1.5vmin;
      position: absolute;
      bottom: -5vmin; /* Adjusted to ensure visibility */
      left: 50%;
      transform: translateX(-50%);
      z-index: 10; /* Ensures it appears above the clock */
    }

    /* Menu styles */
    .menu {
      position: absolute;
      bottom: 30px; /* Position above the menu button */
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 0, 0, 0.2);
      color: white;
      padding: 10px;
      border-radius: 5px;
      display: none; /* Initially hidden */
      flex-direction: column;
      align-items: center;
      gap: 5px;
      z-index: 5;
    }

    /* Show the menu when it has the .expanded class */
    .menu.expanded {
      display: flex;
    }

    /* Button styles inside the menu */
    .menu button {
      background-color: transparent;
      color: white;
      border: 1px solid white;
      padding: 5px;
      border-radius: 3px;
      cursor: pointer;
      touch-action: manipulation;
      width: 100%;
      text-align: center;
    }

    /* Hide controls in fullscreen */
    .fullscreen .controls {
      display: none;
    }

    /* Responsive adjustments for mobile */
    @media (max-width: 600px) {
      .menu-button {
        font-size: 2vmin;
        padding: 3px 8px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="background-video"></div>
    <div class="clock">
      <div id="clock-video" class="clock-video"></div>
      <div class="hand hour-hand" id="hour-hand"></div>
      <div class="hand minute-hand" id="minute-hand"></div>
      <div class="hand second-hand" id="second-hand"></div>
      <div class="controls">
        <button id="menuButton" class="menu-button">Menu</button>
        <div id="menu" class="menu">
          <button id="prevButton">Previous Video</button>
          <button id="nextButton">Next Video</button>
          <button id="toggleBackground">Toggle Clock Background</button>
          <button id="toggleLoop">Lock Video Loop</button>
          <button id="fullScreenBtn">Full Screen</button>
          <button id="linkButton">Visit My Redbubble Store</button>
        </div>
      </div>
    </div>
    <div class="digital-clock" id="digital-clock"></div>
  </div>

  <script>
    // ... (All previous JavaScript code remains unchanged)
  </script>
</body>
</html>
